@page "/eventdetails/{id:int}"
@using EventEaseAppBlazor.Models
@inject EventEaseAppBlazor.Services.EventService EventService
@inject NavigationManager NavigationManager

<h3>Detalles del evento</h3>

@if (evento is null)
{
    <p>Evento no encontrado.</p>
}
else
{
    <div class="card p-4">
        <h3>@evento.Nombre</h3>
        <p><strong>Id:</strong> @evento.Id</p>
        <p><strong>Fecha:</strong> @evento.Fecha.ToShortDateString()</p>
        <p><strong>Ubicación:</strong> @evento.Ubicacion</p>
        <p><strong>Descripción:</strong> @evento.Descripcion</p>
        <p><strong>Organizador:</strong> @evento.Organizador</p>
        <p><strong>Categoría:</strong> @evento.Categoria</p>
        <button class="btn btn-danger" @onclick="EliminarEvento">Eliminar</button>
        <button class="btn btn-secondary ms-2" @onclick="Volver">Volver</button>
    </div>
}

@code {
    [Parameter]
    public int id { get; set; }

    private Event? evento;

    protected override void OnParametersSet()
    {
        evento = EventService.GetById(id);
    }

    private void EliminarEvento()
    {
        if (evento != null)
        {
            EventService.Remove(evento.Id);
            NavigationManager.NavigateTo("/");
        }
    }

    private void Volver()
    {
        NavigationManager.NavigateTo("/");
    }
}